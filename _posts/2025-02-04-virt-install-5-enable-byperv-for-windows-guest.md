---
layout: post
title: "virt-install-5 enable hyperv features for Windows Guest by default"
---

# What happen: virt-install creating Windows VM fail after update system fedora-41
```
Starting install... 
ERROR unsupported configuration: host doesn't support hyperv 'vpindex' feature
ERROR unsupported configuration: host doesn't support hyperv 'vpindex' feature
```

# why
virt-install version update from 4.x to 5.0. and in new virt-install-5.0, it enables the hyperv features
when creating Windows VM. but I used the option --qemu-commandline="-cpu host,+svm" it overwrite the
-cpu option that generated by virt-install+virsh ...

# workaround or resolution
There is also a --cpu option for virt-install, using **--cpu=host,+svm** instead **--qemu-commandline="-cpu host,+svm"** fixed the issue.  
So generally don't use the **--qemu-commandline=** option unless you know what you are doing.
